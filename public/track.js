(function() {
  if (window.zhuge) return;
  var addListener = Element.prototype.addEventListener;
  window.zgclickhook = true;

  function zgListener() {
    if (window.zhuge && window.zhuge.trackClick) window.zhuge.trackClick(arguments[0]);
  }

  Element.prototype.addEventListener = function() {
    var etype = arguments[0];
    var listener = arguments[1];
    if (etype === 'click' && listener) {
      this.setAttribute('zgclickable', true);
      this.setAttribute('zghook', parseInt(this.getAttribute('zghook') || 0) + 1);
      if (parseInt(this.getAttribute('zghook')) === 1) addListener.call(this, 'click', zgListener);
    }
    return addListener.apply(this, arguments);
  };

  var removeListener = Element.prototype.removeEventListener;
  Element.prototype.removeEventListener = function() {
    var etype = arguments[0];
    this.setAttribute('zghook', parseInt(this.getAttribute('zghook') || 0) - 1);
    if (etype === 'click' && parseInt(this.getAttribute('zghook')) <= 0) {
      this.removeAttribute('zgclickable');
      removeListener.call(this, etype, zgListener);
    }
    removeListener.apply(this, arguments);
  };
  window.zhuge = [];
  window.zhuge.methods = '_init identify track trackRevenue getDid getSid getKey setSuperProperty setUserProperties setWxProperties setPlatform'.split(
    ' ');
  window.zhuge.factory = function(b) {
    return function() {
      var a = Array.prototype.slice.call(arguments);
      a.unshift(b);
      window.zhuge.push(a);
      return window.zhuge;
    };
  };
  for (var i = 0; i < window.zhuge.methods.length; i++) {
    var key = window.zhuge.methods[i];
    window.zhuge[key] = window.zhuge.factory(key);
  }

  window.zhuge._init('2d21710feba64707b4cfc693349b23a7', { //配置应用的AppKey
    superProperty: {}, //全局的事件属性(选填)
    adTrack: false, //广告监测开关，默认为false
    zgsee: false, //视屏采集开关， 默认为false
    autoTrack: true, //启用全埋点采集（选填，默认false）
    singlePage: false, //是否是单页面应用（SPA），启用autoTrack后生效（选填，默认false）
  });
})();

FingerprintJS.load().then(fp => fp.get()).then(result => zhuge.identify(result.visitorId));

// SDK
window._zhugeSdk=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e['default']}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=29)}([function(e,t,n){var r,i,o,a,s,c,u,l,d,p,h,f=n(3),g=window.navigator,v=window.document,m=g.userAgent,y=Array.prototype,w=Object.prototype,k=w.toString,_=y.forEach,S=Array.isArray,b=y.slice,T=w.hasOwnProperty,z={},E=[],A=null,P={replacezgSecretParams:function(e){var t=this.JSONDecode(window.sessionStorage.getItem(f.SESSION_KEYS.IS_ANALYSIS_MODE)),n=window.sessionStorage.getItem("zhugeAnalysisModeType");return"string"==typeof e&&/^(http|https)/.test(e)&&-1!==e.indexOf("zgSecret")||t&&!0===t.flag||"heatMap"===n||"analysis"===n?e.replace(/[\?&]?zgSecret=\w+-[\w-]{36}/,""):e},throttle:function(e,t,n){var r=null;return function(){var i=arguments;r||(r=setTimeout((function(){e.apply(n,i),r=null}),t))}},debounce:function(e,t,n){return function(){var r=n||this,i=arguments;clearTimeout(e.id),e.id=setTimeout((function(){e.apply(r,i)}),t)}},each:function(e,t,n){if(null!=e)if(_&&e.forEach===_)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e)===z)return}else for(var o in e)if(T.call(e,o)&&t.call(n,e[o],o,e)===z)return},extend:function(e){return P.each(b.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},isUndefined:function(e){return void 0===e},type:function(e){return k.call(e)},isString:function(e){return"[object String]"==k.call(e)},isArray:S||function(e){return"[object Array]"===k.call(e)},isFunction:function(e){return"[object Function]"===k.call(e)},isObject:function(e){return"[object Object]"===k.call(e)&&void 0!==e},strMiddleSplit:function(e,t){t=t||{maxLength:20,beginLength:8,endLength:8,replaceStr:"..."};var n={fullCharReg:/[^\x00-\xff]/,fullCharsReg:/[^\x00-\xff]/g,anyChars:/[\S\s]{1}/g},r=((e+="").match(n.fullCharsReg)||[]).length,i=[],o=0,a=[],s=0;if(e.length+r>t.maxLength){for(var c=e.match(n.anyChars),u=0;u<c.length;u++){var l=c[u];if(o>=t.beginLength)break;o+=n.fullCharReg.test(l)?2:1,i.push(l)}var d=c.reverse();for(u=0;u<d.length;u++){l=d[u];if(s>=t.endLength)break;s+=n.fullCharReg.test(l)?2:1,a.push(l)}return i.join("")+t.replaceStr+a.reverse().join("")}return e},hasMobileSdk:function(){var e=function(){return!!(window.zhugeTracker||window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.zhugeTracker)},t=/ZGSDK/.test(window.navigator.userAgent)||e(),n=e(),r=this;return n||A||(A=setInterval((function(){if(e()){for(var t=0;t<E.length;t++){var n=E[t],i=r.hasMobileSdk();i[n[0]].apply(i,n[1])}E=[],clearInterval(A)}}),50)),{flag:t,track:function(e,r){t&&(n?window.zhugeTracker?window.zhugeTracker.trackProperty(e,P.JSONEncode(r)):window.webkit.messageHandlers.zhugeTracker.postMessage({type:"track",name:e,prop:r}):E.push(["track",[e,r]]))},identify:function(e,r){t&&(n?window.zhugeTracker?window.zhugeTracker.identifyProperty(e,P.JSONEncode(r)):window.webkit.messageHandlers.zhugeTracker.postMessage({type:"identify",name:e,prop:r}):E.push(["identify",[e,r]]))},autoTrack:function(e,r){t&&(n?window.zhugeTracker?window.zhugeTracker.autoTrackProperty(e,P.JSONEncode(r)):window.webkit.messageHandlers.zhugeTracker.postMessage({type:"autoTrack",name:e,prop:r}):E.push(["autoTrack",[e,r]]))},dr:function(e,r){t&&(n?window.zhugeTracker?window.zhugeTracker.trackDurationOnPage(e,P.JSONEncode(r)):window.webkit.messageHandlers.zhugeTracker.postMessage({type:"dr",name:e,prop:r}):E.push(["dr",[e,r]]))},getDid:function(){if(t&&window.zhugeTracker){if(P.isString(window.zhugeTracker.did))return window.zhugeTracker.did;if(P.isFunction(window.zhugeTracker.getDid))return window.zhugeTracker.getDid();if(P.isString(window.zhugeDid))return window.zhugeDid}}}},includes:function(e,t){return-1!==e.indexOf(t)},encode:function(e){var t={};for(var n in e){var r=e[n];try{r=P.replacezgSecretParams(e[n])}catch(t){r=e[n]}/^\$/.test(n)?t[n]=r:t["_"+n]=r}return t},truncate:function(e,t){var n;return"string"==typeof e?n=e.slice(0,t):P.isArray(e)?(n=[],P.each(e,(function(e){n.push(P.truncate(e,t))}))):P.isObject(e)?(n={},P.each(e,(function(e,r){n[r]=P.truncate(e,t)}))):n=e,n},strip_empty_properties:function(e){var t={};return P.each(e,(function(e,n){P.isString(e)&&e.length>0&&(t[n]=e)})),t},trim:function(e){return(e||"").replace(/\s+/g," ").replace(/^\s+/,"").replace(/\s+$/,"")},random:function(e,t){return Math.round(Math.random()*(t-e))+e},randomAesKey:function(){for(var e=[48,57],t=[65,90],n=[],r=0;r<16;r++)n.push(String.fromCharCode(this.random(0,1)?this.random(e[0],e[1]):this.random(t[0],t[1])));return n.join("")},jsonp:function(e,t,n){var r="cb"+Math.random().toString().split(".")[1],i=v.createElement("script");i.src=e+"?callback="+r,window[r]=function(e){t(e)},i.onerror=function(){n()},v.head?v.head.appendChild(i):v.getElementsByTagName("head")[0].appendChild(i)},isEqual:function(e,t){if(this.type(e)!==this.type(t))return!1;if(this.isObject(e)){var n=!0;for(var r in e)e[r]!==t[r]&&(n=!1);return n}return this.JSONEncode(e)===this.JSONEncode(t)},JSONEncode:function(e){var t=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,(function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'},n=function(e,r){var i="",o=0,a="",s="",c=0,u=i,l=[],d=r[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),typeof d){case"string":return t(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(i+="    ",l=[],"[object Array]"===k.apply(d)){for(c=d.length,o=0;o<c;o+=1)l[o]=n(o,d)||"null";return s=0===l.length?"[]":i?"[\n"+i+l.join(",\n"+i)+"\n"+u+"]":"["+l.join(",")+"]",i=u,s}for(a in d)T.call(d,a)&&(s=n(a,d))&&l.push(t(a)+(i?": ":":")+s);return s=0===l.length?"{}":i?"{"+l.join(",")+u+"}":"{"+l.join(",")+"}",i=u,s}};return n("",{"":e})},JSONDecode:(c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=function(e){throw{name:"SyntaxError",message:e,at:i,text:a}},l=function(e){return e&&e!==o&&u("Expected '"+e+"' instead of '"+o+"'"),o=a.charAt(i),i+=1,o},d=function(){var e,t="";for("-"===o&&(t="-",l("-"));o>="0"&&o<="9";)t+=o,l();if("."===o)for(t+=".";l()&&o>="0"&&o<="9";)t+=o;if("e"===o||"E"===o)for(t+=o,l(),"-"!==o&&"+"!==o||(t+=o,l());o>="0"&&o<="9";)t+=o,l();if(e=+t,isFinite(e))return e;u("Bad number")},p=function(){var e,t,n,r="";if('"'===o)for(;l();){if('"'===o)return l(),r;if("\\"===o)if(l(),"u"===o){for(n=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof c[o])break;r+=c[o]}else r+=o}u("Bad string")},h=function(){for(;o&&o<=" ";)l()},s=function(){switch(h(),o){case"{":return function(){var e,t={};if("{"===o){if(l("{"),h(),"}"===o)return l("}"),t;for(;o;){if(e=p(),h(),l(":"),Object.hasOwnProperty.call(t,e)&&u('Duplicate key "'+e+'"'),t[e]=s(),h(),"}"===o)return l("}"),t;l(","),h()}}u("Bad object")}();case"[":return function(){var e=[];if("["===o){if(l("["),h(),"]"===o)return l("]"),e;for(;o;){if(e.push(s()),h(),"]"===o)return l("]"),e;l(","),h()}}u("Bad array")}();case'"':return p();case"-":return d();default:return o>="0"&&o<="9"?d():function(){switch(o){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null;default:u("Unexpected '"+o+"'")}}()}},function(e){return null===e?null:void 0!==e?(a=e,i=0,o=" ",t=s(),h(),o&&u("Syntax error"),t):void 0;var t}),HTTPBuildQuery:function(e,t){var n,r,i=[];return void 0===t&&(t="&"),P.each(e,(function(e,t){n=encodeURIComponent(e.toString()),r=encodeURIComponent(t),i[i.length]=r+"="+n})),i.join(t)},getQueryParam:function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(null===n||n&&"string"!=typeof n[1]&&n[1].length)return"";var r=n[1];try{r=decodeURIComponent(decodeURIComponent(r)).replace(/\+/g," ")}catch(e){}return r},getDomain:function(e){var t=(e+="/").match(/\/\/\S*?\//);return t&&t.length?t[0].replace(/\//g,""):""},register_event:function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,n,r,i){if(t)if(t.addEventListener&&!i)t.addEventListener(n,r,!1);else{var o="on"+n,a=t[o];t[o]=function(t,n,r){return function(i){if(i=i||e(window.event)){var o,a,s=!0;return P.isFunction(r)&&(o=r(i)),a=n.call(t,i),!1!==o&&!1!==a||(s=!1),s}}}(t,r,a)}else console&&console.error("No valid element provided to register_event")}}(),cookie:{get:function(e){for(var t=e+"=",n=v.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null},parse:function(e){var t;try{t=P.JSONDecode(P.cookie.get(e))||{}}catch(e){}return t},set:function(e,t,n,r,i,o){var a="",s="",c="";if(r){var u=v.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),l=u?u[0]:"";a=l?"; domain=."+l:""}if(o||this.remove(e),n){var d=new Date;d.setTime(d.getTime()+24*n*60*60*1e3),s="; expires="+d.toGMTString()}i&&(c="; secure"),v.cookie=e+"="+encodeURIComponent(t)+s+"; path=/"+a+c},remove:function(e){var t=v.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),n=t?t[0]:"";P.cookie.set(e,"",-1,"."+n,"",!0)}},info:{campaignParams:function(e){e||(e="{}"),P.isString(e)&&(e=P.JSONDecode(e));var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),n="",r={};return P.each(t,(function(t){((n=P.getQueryParam(v.URL,t)).length||e[t])&&(r["$"+t]=e[t]||n)})),r},searchEngine:function(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)baidu.com")?"baidu":0===e.search("https?://(.*)sogou.com")?"sogou":0===e.search("https?://(.*)haosou.com")?"haosou":null},searchKeyword:function(e){var t=P.info.searchEngine(e);return"google"==t?P.getQueryParam(e,"q"):"baidu"==t?P.getQueryParam(e,"wd"):"sogou"==t?P.getQueryParam(e,"query"):"haosou"==t?P.getQueryParam(e,"q"):null},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},browser:function(e,t,n){t=t||"";return n?P.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":P.includes(e,"FBIOS")?"Facebook Mobile":P.includes(e,"Chrome")?"Chrome":P.includes(e,"CriOS")?"Chrome iOS":P.includes(t,"Apple")?P.includes(e,"Mobile")?"Mobile Safari":"Safari":P.includes(e,"Android")?"Android Mobile":P.includes(e,"Konqueror")?"Konqueror":P.includes(e,"Firefox")?"Firefox":P.includes(e,"MSIE")||P.includes(e,"Trident/")?"Internet Explorer":P.includes(e,"Gecko")?"Mozilla":""},os:function(){var e=m;return/Windows/i.test(e)?/Phone/.test(e)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""},device:function(e){return/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Windows Phone/i.test(e)?"Windows Phone":/Android/.test(e)?"Android":""},resolution:function(){return screen.width+"*"+screen.height}},UUID:(r=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(screen.height*screen.width).toString(16);return r()+"-"+Math.random().toString(16).replace(".","")+"-"+function(e){var t,n,r=m,i=[],o=0;function a(e,t){var n,r=0;for(n=0;n<t.length;n++)r|=i[n]<<8*n;return e^r}for(t=0;t<r.length;t++)n=r.charCodeAt(t),i.unshift(255&n),i.length>=4&&(o=a(o,i),i=[]);return i.length>0&&(o=a(o,i)),o.toString(16)}()+"-"+e+"-"+r()})};e.exports=P},function(e,t,n){var r=n(0),i=!0;!function(){try{document.querySelector(":scope *")}catch(e){i=!1}}();var o={prefix:{expand:"zhuge-auto-track-",interface:"zhuge-interface-"},body:document.getElementsByTagName("body")[0],ready:function(e,t){if(this.body)e.call(t);else var n=this,r=setInterval((function(){window.document.body&&(n.body=window.document.body,clearInterval(r),e.call(t))}),50)},cssEscape:function(e){if(0==arguments.length)return console.error("`CSS.escape` requires an argument."),"";for(var t,n=String(e),r=n.length,i=-1,o="",a=n.charCodeAt(0);++i<r;)0!=(t=n.charCodeAt(i))?o+=t>=1&&t<=31||127==t||0==i&&t>=48&&t<=57||1==i&&t>=48&&t<=57&&45==a?"\\"+t.toString(16)+" ":(0!=i||1!=r||45!=t)&&(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?n.charAt(i):"\\"+n.charAt(i):o+="�";return o},addClass:function(e,t){var n=this.getAttr(e,"class")||"";new RegExp(t).test(n)||(n+=" "+t,o.setAttr(e,"class",r.trim(n)))},removeClass:function(e,t){var n=this.getAttr(e,"class")||"";o.setAttr(e,"class",r.trim(n.replace(t,"")))},bind:function(e,t,n,i){i=i||e;var o=function(t){if((t.target=t.target||t.srcElement,r.isFunction(n))&&!1===n.call(i,t||window.event,e))return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue&&(t.returnValue=!1),t.cancelBubble&&(t.cancelBubble=!0),!1};if(e.addEventListener)e.addEventListener(t,o,!0);else if(e.attachEvent)e.attachEvent("on"+t,o);else{var a="on"+t,s=e[a];e[a]=function(t){return r.isFunction(s)&&s.call(e,t||window.event),n.call(i,t||window.event,e)}}return{unbind:function(){e.removeEventListener?e.removeEventListener(t,o,!0):e.detachEvent&&e.detachEvent("on"+t,o)}}},data:function(e,t){var n=e.dataset||{};if(r.isString(t))return n[t];for(var i in t)n[i]=t[i]},getStylePropertyValue:function(e,t){return e&&t?window.getComputedStyle?window.getComputedStyle(e).getPropertyValue(t):e.currentStyle?e.currentStyle[t]:"":""},getTagName:function(e){return e&&e.tagName&&e.tagName.toLowerCase?e.tagName.toLowerCase():""},getAttr:function(e,t){return e&&e.getAttribute?e.getAttribute(t):""},setAttr:function(e,t,n){if(r.isObject(t))for(var i in t)e.setAttribute(i,t[i]);else e.setAttribute(t,n)},isValidLink:function(e){return"a"===this.getTagName(e)&&this.getAttr(e,"href")&&!/^javascript:/.test(this.getAttr(e,"href"))},is:function(e,t){for(var n=!1,r=this.query(t),i=e;i&&!n&&"body"!==this.getTagName(i);){for(var o=0,a=r.length;o<a;o++){if(r[o]===i){n=!0;break}}n||(i=this.getParent(i))}return{flag:n,target:i}},isClickAble:function(e,t,n,i){if(!e||this.isTextNode(e))return{flag:!1};var o=this.getTagName(e),a=this.getAttr(e,"type"),s=this.isValidLink(e),c={flag:!1,target:e,isValidLink:s,form:null};if(this.getAttr(e,"zgclickable")&&"body"!==o&&("input"!==o||/button|reset|submit/.test(a)))return c.flag=!0,c;switch(o){case"a":if(s){c.flag=!0;break}case"button":e.disabled||(c.flag=!0);break;case"select":case"textarea":c.flag=i;break;case"input":/button|reset|submit/.test(a)&&!e.disabled?(c.flag=!0,"submit"===a&&(c.form=e.form)):c.flag=i;break;case"body":c.flag=!1;break;default:if(this.hasBindClick(e)||r.isFunction(t)&&t(e))c.flag=!0;else if(!n)return this.isClickAble(this.getParent(e))}return c},hasBindClick:function(e){return!!(e.onclick||window.jQuery&&(window.jQuery._data||window.jQuery.data)&&r.isFunction(window.jQuery._data||window.jQuery.data)&&(window.jQuery._data||window.jQuery.data)(e,"events"))},getParent:function(e){return e.parentNode},getIndexInParent:function(e){for(var t=this.getParent(e),n=this.getSelector(e),r=o.query(t,n),i=[],a=0,s=r.length;a<s;a++){var c=r[a];this.getParent(c)===t&&i.push(c)}for(a=0,s=i.length;a<s;a++){if((c=i[a])===e)return a}return 0},getSelector:function(e){for(var t=this.getAttr(e,"id"),n=this.getTagName(e),i=r.trim(this.getAttr(e,"class")).split(/\s/),o=[],a=0,s=i.length;a<s;a++)new RegExp(this.prefix.interface+"|"+this.prefix.expand).test(i[a])||o.push(this.cssEscape(i[a]));return o=o.join("."),t?"#"+this.cssEscape(t):n+(o=o?"."+o:"")},getUniqueSelector:function(e,t){var n=this.getSelector(e);return/#/.test(n)||"body"===this.getTagName(e)?(t&&(n=n+">"+t),n):this.getParent(e)?(n+=":eq("+this.getIndexInParent(e)+")",t&&(n=n+">"+t),this.getUniqueSelector(this.getParent(e),n)):""},getFullContent:function(e){return e&&(e.textContent||e.innerText||e.value||this.getAttr(e,"type"))||""},getTextContent:function(e){var t=this.getFullContent(e),n=window.zhuge&&window.zhuge.config&&window.zhuge.config.privacySplitRule.privacy;n&&(t=t.replace(/([\w\.\-_]+)?\w+@[\w-_]+(\.\w+){1,}/gim,"*@*").replace(/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,"*<url>*").replace(/\d/g,"*").replace(/\s/g,""),window.__sdkprivacy&&r.isFunction(window.__sdkprivacy)&&(t=window.__sdkprivacy(t)||t));var i=null;window.zhuge&&(i=window.zhuge.config.privacySplitRule);try{r.isString(i)&&(i=r.JSONDecode(i))}catch(e){i=null}return n?r.strMiddleSplit(t,i||{maxLength:10,beginLength:3,endLength:3,replaceStr:"..."}):t},query:function(){var e="",t=window.document,n=/:eq\(\d+\)/g;if(r.isString(arguments[0])?e=arguments[0]:(t=arguments[0]||t,e=arguments[1]),this.isTextNode(t))return[];if(n.test(e)){for(var o=e.split(n),a=e.match(n),s=null,c=0,u=o.length;c<u;c++){var l=o[c].replace(/^>/,":scope>");if(!l)break;if(s=this.query(s||t,l),!(a.length>c))return s;var d=a[c].match(/\d+/)[0];if(!(s&&d<s.length))return[];s=s[d]}return[s]}var p=/:scope(?![\w-])/gi,h=null;if(!i&&t.setAttribute&&e&&p.test(e)){var f="q"+Math.floor(1e6*Math.random());return e=e.replace(p,"["+f+"]"),t.setAttribute(f,""),h=t.querySelectorAll(e),t.removeAttribute(f),h}return t.querySelectorAll(e)},isTextNode:function(e){return"#text"===e.nodeName},loadJs:function(e){e=r.extend({async:!0,src:"",onLoad:null,onError:null,context:null},e||{});var t=document.createElement("script");this.setAttr(t,{async:e.async,src:e.src}),this.bind(t,"load",e.onLoad,e.context),this.bind(t,"error",e.onError,e.context),document.body.appendChild(t)},supportTest:function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}};window._zgDomUtil=o,e.exports=o},function(e,t,n){var r=n(1),i=n(0);e.exports=i.extend({getMousePos:function(e){var t=e||window.event;return{x:t.clientX,y:t.clientY}},getRect:function(e,t){var n=e.getBoundingClientRect(),r=this.css(e,"position");return{position:"fixed"===r?"fixed":"absolute",width:e.offsetWidth,height:e.offsetHeight,top:n.top+("fixed"===r||t?0:window.pageYOffset),bottom:n.bottom,left:n.left+("fixed"===r||t?0:window.pageXOffset),right:n.right}},getOffset:function(e){for(var t={position:"fixed"===this.css(e,"position")?"fixed":"absolute",width:e.offsetWidth,height:e.offsetHeight,top:e.offsetTop,left:e.offsetLeft};e.offsetParent;){var n=e.offsetParent;"fixed"===this.css(n,"position")&&(t.position="fixed"),t.top+=n.offsetTop,t.left+=n.offsetLeft,e=n}return t},css:function(e,t){if(i.isString(t))return window.getComputedStyle(e)[t];for(var n in t)e.style[n]=t[n]},addStyleRules:function(e){var t,n=document.createElement("style");document.head?document.head.appendChild(n):document.getElementsByTagName("head")[0].appendChild(n),t=n.sheet;for(var r=0,i=e.length;r<i;r++){var o=1,a=e[r],s=e[r][0],c="";"[object Array]"===Object.prototype.toString.call(a[1][0])&&(a=a[1],o=0);for(var u=a.length;o<u;o++){var l=a[o];c+=l[0]+":"+l[1]+(l[2]?" !important":"")+";\n"}t.insertRule(s+"{"+c+"}",t.cssRules.length)}},append:function(e,t){i.isString(t)?e.insertAdjacentHTML("beforeend",t):e.appendChild(t)},html:function(e,t){e.innerHTML=t},remove:function(e){e.parentNode&&e.parentNode.removeChild(e)},contains:function(e,t){for(var n=!1;this.getParent(t)&&"body"!==r.getTagName(t);){if(this.getParent(t)===e){n=!0;break}t=this.getParent(t)}return n},show:function(e,t){return i.isArray(e)?e.forEach((function(e){this.css(e,{display:t||"block"})}),this):this.css(e,{display:t||"block"}),e},hide:function(e){return i.isArray(e)?e.forEach((function(e){this.css(e,{display:"none"})}),this):this.css(e,{display:"none"}),e},child:function(e){for(var t=[],n=0,r=e.childNodes.length;n<r;n++)this.isTextNode(e.childNodes[n])||t.push(e.childNodes[n]);return t},siblings:function(e,t){var n=[];return this.child(this.getParent(e)).forEach((function(r){r!==e&&this.is(r,t)&&n.push(r)}),this),n},setContext:function(e,t){e.textContent=t},delegate:function(e,t,n,r,i){var o=this;return this.bind(e,t,(function(e){var t=e.target,a=o.is(t,n);if(a.flag)return r.call(i,e,a.target)}),i)},scroll:function(e){r.bind(e,"mousewheel",(function(t){var n=this.getRect(e).height,r=e.scrollHeight;(e.scrollTop===r-n&&t.deltaY>0||0===e.scrollTop&&t.deltaY<0)&&t.preventDefault()}),this)},prev:function(e){var t=e.previousSibling;return!t||this.isTextNode(e)?null:t},prevAll:function(e){for(var t=[];this.prev(e);)t.push(this.prev(e)),e=this.prev(e);return t},fixPosition:function(e){var t=this.css(e,"position");/absolute|fixed/.test(t)||this.css(e,{position:"relative"})},locate:function(e,t){var n=this.getRect(e,!0),r=this.getRect(t),i={top:n.top,left:n.left+n.width};i.top+r.height>=window.innerHeight&&(i.top=Math.max(i.top-(i.top+r.height-window.innerHeight),0)),i.left+r.width>=window.innerWidth&&(i.left=Math.max(n.left-r.width,0)),this.css(t,{top:i.top+"px",left:i.left+"px"})},removeData:function(e,t){delete(e.dataset||{})[t]},empty:function(e){return e.innerHTML="",e},scrollTo:function(e){var t=this.getRect(this.body),n=this.getRect(e),r=n.top-t.height/2,i=n.left-t.width/2;this.body.scrollTop=r,this.body.scrollLeft=i}},r)},function(e,t){e.exports={MODE:{NORMAL:0,CREATE:1,CREATING_EVENT:2,ADD_SAME:3,ADDING_SAME_AUTO:4,ADDING_SAME_CUSTOM:5,ADD_PROPERTY:6,ADDING_PROPERTY:7},SESSION_KEYS:{IS_ANALYSIS_MODE:"isZhugeVisualizerMode",PARAMS:"jsVisualizerParam"},URL:{DATA_LIST:"/data/datalist.jsp",DELETE_EVENT:"/appvisual/delete.jsp",CREATE_EVENT:"/appvisual/create.jsp",UPDATE_EVENT:"/appvisual/update.jsp",CHECK_NAME:"/appvisual/checkName.jsp",QUERY_VISUAL_LIST:"/appvisual/queryVisualList.jsp"}}},function(e,t,n){e.exports={log:function(){try{for(var e=arguments[0],t=["%c[sdk-"+e+"]: ","color: #0ea1eb;"],n=1;n<arguments.length;n++)t.push(arguments[n]);0}catch(e){}},error:function(){try{for(var e=arguments[0],t=["%c[sdk-"+e+"]: ","color: red;"],n=1;n<arguments.length;n++)t.push(arguments[n]);0}catch(e){}}}},function(e,t,n){var r=n(0),i=n(4),o=4;function a(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function s(e,t){var n=e.responseText;switch(t){case"json":n=r.JSONDecode(n);break;default:console&&console.error(arguments,this)}return n}function c(e){var t=[];for(var n in e){var i=e[n];t.push(encodeURIComponent(n)+"="+encodeURIComponent(r.isString(i)?i:r.JSONEncode(i)))}return t.join("&")}e.exports=function e(t,n){var u=r.extend({type:"post",data:{},headers:{},dataType:"json",success:null,error:null,sync:!0,context:this,jsonp:!1,useSocket:!1},n);try{if(u.jsonp)!function(e,t){var n=function(e,n){r.isFunction(t[e])&&t[e].call(t.context,n)},i=document.createElement("script"),o="callback"+Math.random().toString().split(".")[1],a=e+"?";t.data.callback=o,window[o]=function(e){n("success",e)},i.src=a+c(t.data),i.onerror=function(){n("error")},document.body.appendChild(i)}(t,u);else if(u.useSocket){if(!window._sdkSocket_)return console.warn("socket未初始化"),void setTimeout((function(){e(t,u)}),300);i.log("可视化","socket状态正常，开始发送请求",t,u);var l=r.UUID(),d=n.context;delete n.context,window._sdkSocket_.emit("proxy",{id:l,url:t,options:n}),window._sdkSocket_.on("success-"+l,(function(e){u.success.call(d,e)})),window._sdkSocket_.on("fail-"+l,(function(e){u.error.call(d,e)}))}else!function(e,t){var n=a(),i=function(e){r.isFunction(t[e])&&t[e].call(t.context,s(n,t.dataType))};switch(n.onreadystatechange=function(){if(n.readyState===o)if(n.status>=200&&n.status<=299)try{i("success")}catch(e){i("error")}else i("error")},n.onerror=function(){i("error"),console&&console.error(arguments,this)},n.withCredentials=!0,t.type.toLowerCase()){case"get":e+="?"+c(t.data),n.open(t.type,e,t.sync);break;case"post":var u=c(t.data);n.open(t.type,e,t.sync),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");break;default:console&&console.error(arguments,this)}for(var l in t.headers)n.setRequestHeader(l,t.headers[l]);n.send(u)}(t,u)}catch(e){}}},,,,function(e,t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,r,i,o,a){return n((s=n(n(t,e),n(i,a)))<<(c=o)|s>>>32-c,r);var s,c}function i(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function o(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function c(e,t){var r,c,u,l,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var p=1732584193,h=-271733879,f=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)c=p,u=h,l=f,d=g,p=i(p,h,f,g,e[r],7,-680876936),g=i(g,p,h,f,e[r+1],12,-389564586),f=i(f,g,p,h,e[r+2],17,606105819),h=i(h,f,g,p,e[r+3],22,-1044525330),p=i(p,h,f,g,e[r+4],7,-176418897),g=i(g,p,h,f,e[r+5],12,1200080426),f=i(f,g,p,h,e[r+6],17,-1473231341),h=i(h,f,g,p,e[r+7],22,-45705983),p=i(p,h,f,g,e[r+8],7,1770035416),g=i(g,p,h,f,e[r+9],12,-1958414417),f=i(f,g,p,h,e[r+10],17,-42063),h=i(h,f,g,p,e[r+11],22,-1990404162),p=i(p,h,f,g,e[r+12],7,1804603682),g=i(g,p,h,f,e[r+13],12,-40341101),f=i(f,g,p,h,e[r+14],17,-1502002290),p=o(p,h=i(h,f,g,p,e[r+15],22,1236535329),f,g,e[r+1],5,-165796510),g=o(g,p,h,f,e[r+6],9,-1069501632),f=o(f,g,p,h,e[r+11],14,643717713),h=o(h,f,g,p,e[r],20,-373897302),p=o(p,h,f,g,e[r+5],5,-701558691),g=o(g,p,h,f,e[r+10],9,38016083),f=o(f,g,p,h,e[r+15],14,-660478335),h=o(h,f,g,p,e[r+4],20,-405537848),p=o(p,h,f,g,e[r+9],5,568446438),g=o(g,p,h,f,e[r+14],9,-1019803690),f=o(f,g,p,h,e[r+3],14,-187363961),h=o(h,f,g,p,e[r+8],20,1163531501),p=o(p,h,f,g,e[r+13],5,-1444681467),g=o(g,p,h,f,e[r+2],9,-51403784),f=o(f,g,p,h,e[r+7],14,1735328473),p=a(p,h=o(h,f,g,p,e[r+12],20,-1926607734),f,g,e[r+5],4,-378558),g=a(g,p,h,f,e[r+8],11,-2022574463),f=a(f,g,p,h,e[r+11],16,1839030562),h=a(h,f,g,p,e[r+14],23,-35309556),p=a(p,h,f,g,e[r+1],4,-1530992060),g=a(g,p,h,f,e[r+4],11,1272893353),f=a(f,g,p,h,e[r+7],16,-155497632),h=a(h,f,g,p,e[r+10],23,-1094730640),p=a(p,h,f,g,e[r+13],4,681279174),g=a(g,p,h,f,e[r],11,-358537222),f=a(f,g,p,h,e[r+3],16,-722521979),h=a(h,f,g,p,e[r+6],23,76029189),p=a(p,h,f,g,e[r+9],4,-640364487),g=a(g,p,h,f,e[r+12],11,-421815835),f=a(f,g,p,h,e[r+15],16,530742520),p=s(p,h=a(h,f,g,p,e[r+2],23,-995338651),f,g,e[r],6,-198630844),g=s(g,p,h,f,e[r+7],10,1126891415),f=s(f,g,p,h,e[r+14],15,-1416354905),h=s(h,f,g,p,e[r+5],21,-57434055),p=s(p,h,f,g,e[r+12],6,1700485571),g=s(g,p,h,f,e[r+3],10,-1894986606),f=s(f,g,p,h,e[r+10],15,-1051523),h=s(h,f,g,p,e[r+1],21,-2054922799),p=s(p,h,f,g,e[r+8],6,1873313359),g=s(g,p,h,f,e[r+15],10,-30611744),f=s(f,g,p,h,e[r+6],15,-1560198380),h=s(h,f,g,p,e[r+13],21,1309151649),p=s(p,h,f,g,e[r+4],6,-145523070),g=s(g,p,h,f,e[r+11],10,-1120210379),f=s(f,g,p,h,e[r+2],15,718787259),h=s(h,f,g,p,e[r+9],21,-343485551),p=n(p,c),h=n(h,u),f=n(f,l),g=n(g,d);return[p,h,f,g]}function u(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function p(e){return unescape(encodeURIComponent(e))}function h(e){return function(e){return u(c(l(e),8*e.length))}(p(e))}function f(e,t){return function(e,t){var n,r,i=l(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=c(o.concat(l(t)),512+8*t.length),u(c(a.concat(r),640))}(p(e),p(t))}e.exports=function(e,t,n){return t?n?f(t,e):d(f(t,e)):n?h(e):d(h(e))}},function(e,t){e.exports={SESSION_KEYS:{PARAMS:"zhugeJsHeatMapParams"},URL:{DATA_LIST:"/data/datalist.jsp"}}},function(e,t){e.exports.url={CHECK_LOGIN:"/user/checkAuthorization.jsp",EVENT_LIST:"/data/datalist.jsp",LOAD_ENV_DATA:"/appusergroup/getEventEnvData.jsp",LOAD_USER_PROPS:"/appusergroup/getUserPropMeta.jsp"}},,,function(e,t,n){var r=n(0),i=n(5),o=n(15),a=n(16),s=n(17),c=n(1),u=n(18),l=n(19),d=[],p=["identify","track","page"],h=null,f=["eid","ct","tz","cuid","cn","sid","url","os","ov","wv","mnet","referrer_domain","net","vn","wxeid","uid","share_id","share_title","title","path","share_level"],g=n(10),v=n(3),m=n(4),y=function(e){this.config={},r.extend(this.config,e),this.idle=0,this.last_activity=new Date,this.is_landing=!1,this.pageUtm=null,this.autoTrack=null,this.visualizer=null,this.observeMarkElement=null,this.preScroll=0};function w(e){var t=e;try{t=decodeURIComponent(t)}catch(e){}return t}y.prototype._init=function(e,t,n){if(this._key=e,this._jsc=function(){},r.isObject(t))for(var i in r.extend(this.config,t),this.config)r.isObject(this.config[i])&&(this.config[i]=r.JSONEncode(this.config[i]));var o=this,a=function(e,t){o._getQueryParam(),o._initDid(e),o.cookie=new u("zg_"+o._key,o.config);var n=r.cookie.get("_zg");n&&o.config.inherit_user_data?(o.cookie.register_once(r.JSONDecode(n),""),r.cookie.remove("_zg")):o.cookie.register_once({sid:0,updated:0,info:0,superProperty:o.config.superProperty,platform:o.config.platform},""),o.cookie.register({superProperty:o.config.superProperty,platform:o.config.platform});var i=o._session(t);if(o.config.autoTrack&&(o.is_landing=o._checkLanding(i)),o._info(),o._startPing(),o.config.updateUtm){var a=r.info.campaignParams();o.pageUtm=a}o.config.wechart&&(o._openShare(),o.config.autoTrack||o._trackPV()),o._initAutoTrack(),o._initHistoryHook(),o.config.exposure&&(o.observeMarkElement=new l(o)),o.config.duration&&o._initDuration(),o.is_landing&&o.config.openLanding&&o._initLanding(),o._startZgSee()};this.config.adTrack?(o._wrapTrackerFunction(),r.jsonp("https://u.zhugeapi.net/v2/zgadtrack/header",(function(e){a(e.zg_adver_did,e.zg_adver_sid),n&&n(),o._doTrackerQueue()}),(function(){a(),n&&n(),o._doTrackerQueue()}))):(a(),n&&n())},y.prototype._initDuration=function(){this.cookie.props.prePath?this._duration():this._registerDuration();var e=this;if(window.requestAnimationFrame){var t=0;window.requestAnimationFrame((function n(r){0===t||r-t<=500?e.cookie.register({duration:(e.cookie.props.duration||0)+(r-t)}):e._duration(),t=r,window.requestAnimationFrame(n)}))}else setInterval((function(){e.cookie.register({duration:(e.cookie.props.duration||0)+500})}),500)},y.prototype._getQueryParam=function(){for(var e={},t=location.search.replace("?","").split("&"),n=0;n<t.length;n++){var i=t[n],o=w(i.split("=")[0]),a=w(i.split("=")[1]);e[o]=a}return this._queryParam=e,sessionStorage&&sessionStorage.setItem("shareData",r.JSONEncode({path:location.pathname,param:e})),e},y.prototype._checkLanding=function(e){if(this.config.autoTrack){if(this.config.alwaysLanding)return!0;var t=!1,n=r.getDomain(r.replacezgSecretParams(location.href))!==r.getDomain(r.replacezgSecretParams(document.referrer));return e?n&&(t=!0,this.cookie.register({landHref:r.replacezgSecretParams(location.href)})):n&&r.replacezgSecretParams(location.href)===this.cookie.props.landHref&&(t=!0),t}},y.prototype._initLanding=function(){var e=this,t=function(){e.config.autoTrack&&(h&&clearTimeout(h),h=setTimeout((function(){var t=Math.floor(window.innerHeight+(window.scrollY||window.pageYOffset));e.preScroll!==t&&(e.preScroll=t,e.batchTrack([{dt:"abp",eid:"scroll",param:{$page_url:r.replacezgSecretParams(location.href),$page_title:window.document.title,$scroll:t}}]))}),50))};c.ready((function(){c.bind(window,"scroll",t),t()}),this)},y.prototype._wrapTrackerFunction=function(){var e=this,t={},n="",i=0;for(i=0;i<p.length;i++)t[n=p[i]]=y.prototype[n],y.prototype[n]=function(n){return function(){e.cookie?r.isFunction(t[n])&&t[n].apply(e,arguments):d.push([t[n],arguments])}}(n)},y.prototype._doTrackerQueue=function(){var e=0,t=null;for(e=0;e<d.length;e++)t=d[e]||[],r.isFunction(t[0])&&t[0].apply(this,t[1]||[]);d=[]},y.prototype._startZgSee=function(){var e=this;e.config.zgsee&&i("https://ubak.zhugeio.com/appkey/"+this.getKey(),{type:"get",success:function(t){if(0===t.policy||-1===t.policy){window.zgsee=[{init:[{socketUrl:"wss://zgsee-gw.zhugeio.com/",appKey:e.getKey()},e]}];var n=new Date,r=n.getFullYear().toString()+n.getMonth().toString()+n.getDate().toString();c.loadJs({src:"https://sdk.zhugeio.com/zgsee.min.js?r="+r})}},error:function(e){m.error("视屏","初始化视屏采集失败",e)}})},y.prototype._duration=function(){var e=this.cookie.props.duration,t=this.cookie.props.prePath;this._registerDuration(),this.batchTrack([{dt:"abp",eid:"dr",param:{$dr:Math.ceil(e||0),$url:t,$page_url:t}}])},y.prototype._registerDuration=function(){this.cookie.register({prePath:location.href,duration:0})},y.prototype._initHistoryHook=function(){var e=window.history,t=this;function n(){t.autoTrack&&t.config.autoTrack&&t.autoTrack._onView(!0),t.config.duration&&t._duration(),t.config.exposure&&t.observeMarkElement&&t.observeMarkElement.init()}if(c.bind(window,"popstate",(function(){n()}),this),void 0===window.onpopstate&&c.bind(window,"hashchange",(function(){n()}),this),e&&e.pushState){var r=e.pushState;e.pushState=function(){var t=r.apply(e,arguments);return n(),t}}if(e&&e.replaceState){var i=e.replaceState;e.replaceState=function(){var t=i.apply(e,arguments);return n(),t}}},y.prototype._initAutoTrack=function(){var e=!0;m.log("可视化","可视化埋点开关：",this.config.visualizer);var t=this.visualizer=new a(this,{open:this.config.visualizer,stopTrack:function(){e=!1}});m.log("可视化","全埋点开关：",this.config.visualizer);var n=this.autoTrack=new o(this,{open:this.config.autoTrack,isClickAble:this.config.isClickAble,isLanding:this.is_landing});m.log("可视化","当前页面是否标记为落地页：",this.is_landing);var i=new s(this,{open:this.config.autoTrack}),u=this,l=function(r){if(e){m.log("可视化","触发body点击");var i=c.isClickAble(r.target,u.config.isClickAble),o=i.flag&&(!c.getAttr(i.target,"zgclickable")||!window.zgclickhook);if(m.log("可视化","元素可点击判断结果：",o?"检测通过":"检测未通过",i),o){m.log("可视化","元素可点击捕获成功",i);var a=[];u.config.autoTrack&&a.push(n.getEvent(i)),u.config.visualizer&&(a=t.getEvent(i).concat(a));var s=r.target||r.srcElement||{},l=s.clickedByZgSdk,d=c.getAttr(i.target,"target");if(u.config.redirectAfterTrack&&document.body.addEventListener&&(!d||"_self"===d))return m.log("可视化","检测到超链接点击"),!0===l||!a.length||(u.batchTrack(a,(function(){s.clickedByZgSdk=!0,s.click()})),!1);a.length&&u.batchTrack(a)}}},d=function(e){m.log("可视化","触发表单change");var n=c.isClickAble(e.target,u.config.isClickAble,!1,!0);if(n.flag){m.log("可视化","表单change捕获成功",n);var r=[];u.config.visualizer&&(r=t.getEvent(n).concat(r)),r.forEach((function(e){e.param.element_content=null})),r.length&&u.batchTrack(r)}};u=this;c.ready((function(){if(m.log("可视化","页面结构加载完成"),c.bind(c.body,"click",l),c.bind(c.body,"change",d),u._queryParam.zgSecret)sessionStorage.setItem("zgSecret",u._queryParam.zgSecret);else if(/zgSecret=[a-zA-Z\d-]*/.test(location.href)){var e=location.href.match(/zgSecret=[a-zA-Z\d-]*/);e&&e.length&&sessionStorage.setItem("zgSecret",e[0].replace("zgSecret=",""))}var o=sessionStorage.getItem("zgSecret");m.log("分析视图","zgSecret获取结果",o),m.log("分析视图","是否进入观察者模式: "+(o?"是":"否")),o&&c.loadJs({src:"https://sdk.zhugeio.com/socket.min.js?a="+(new Date).toDateString(),onLoad:function(){m.log("分析视图","加载socket sdk成功");var e=window._sdkSocket_=window.SocketIo("wss://static2-online.zhugeio.com",{path:"/ns",query:{secret:sessionStorage.getItem("zgSecret"),role:"client",application:"sdk"}});e.on("openAutoTrack",(function(){m.log("分析视图","打开全埋点分析视图"),n._loadAnalysisCode()})),e.on("pageReload",(function(e){m.log("分析视图","页面切换/重新加载",e),window.sessionStorage.removeItem("zhugeAnalysisModeType"),e.href?location.replace(e.href):location.reload()})),e.on("openJsHeatMap",(function(e){m.log("分析视图","打开落地页分析视图"),window.sessionStorage.setItem(g.SESSION_KEYS.PARAMS,r.JSONEncode(e)),i._loadAnalysisCode()})),e.on("openJsVisualizer",(function(e){m.log("分析视图","打开可视化分析视图"),window.sessionStorage.setItem(v.SESSION_KEYS.PARAMS,r.JSONEncode(e)),t._loadAnalysisCode()})),e.on("close",(function(e){m.log("分析视图","分析平台已断开socket连接"),alert("分析平台已断开连接"),sessionStorage.removeItem("zgSecret"),sessionStorage.removeItem(v.SESSION_KEYS.IS_ANALYSIS_MODE),sessionStorage.removeItem("zhugeAnalysisModeType"),window.location.href=r.replacezgSecretParams(window.location.href)}))}})}),this)};var k=!0;function _(){var e=localStorage.getItem("zdru");return e=r.JSONDecode(e||"{}")}y.prototype.trackClick=function(e){if(k){m.log("可视化","click hook中捕捉到点击事件",e);var t=c.isClickAble(e.target,this.config.isClickAble),n=t.flag&&c.getAttr(t.target,"zgclickable");if(m.log("可视化","click hook元素可点击规则判定结果",n?"通过判断":"未通过判断",t),n){var r=[];this.config.autoTrack&&r.push(this.autoTrack.getEvent(t)),this.config.visualizer&&(r=this.visualizer.getEvent(t).concat(r)),this.batchTrack(r),k=!1,setTimeout((function(){k=!0}),100)}}},y.prototype._session=function(e){var t=!1,n=this.cookie.props.updated,i=this.cookie.props.sid,o=1*new Date,a=new Date;if(0==i||o>n+60*this.config.session_interval_mins*1e3){if(i>0&&n>0){var s={dt:"se",pr:{}};s.pr.$ct=n,s.pr.$tz=6e4*-a.getTimezoneOffset(),s.pr.$dru=n-i,s.pr.$sid=i,s.pr.$cuid=this.cookie.props.cuid,this.cookie.register({zs:0,sc:0,firstScreen:a.getTime()}),this._batchTrack(s)}i=e||o,i*=1;var c={dt:"ss",pr:{}},u=r.info.campaignParams(this.config.utm);c.pr=r.extend(c.pr,u),this.cookie.register({utm:r.JSONEncode(u)},""),c.pr.$ct=a.getTime(),c.pr.$sid=i,c.pr.$cuid=this.cookie.props.cuid,c.pr.$cn=this.config.app_channel,c.pr.$vn=this.config.app_version,c.pr.$tz=6e4*-a.getTimezoneOffset(),c.pr.$url=r.replacezgSecretParams(location.href),c.pr.$ref=r.replacezgSecretParams(document.referrer);var l=r.getDomain(r.replacezgSecretParams(document.referrer));c.pr.$referrer_domain=l,this.cookie.register({referrerDomain:l},""),this._batchTrack(c),this.cookie.register({sid:i},""),t=!0}return this.cookie.register({updated:o},""),t},y.prototype._info=function(e){var t=this.cookie.props.info,n=1*new Date;if(n>t+24*this.config.info_upload_interval_days*60*60*1e3||e){var i={dt:"pl",pr:{$rs:r.info.resolution()}},o=new Date;i.pr.$tz=6e4*-o.getTimezoneOffset(),i.pr.$ct=o.getTime(),i.pr.$cuid=this.cookie.props.cuid,i.pr=r.extend(i.pr,r.encode(r.JSONDecode(this.cookie.props.platform))),1===this.cookie.props.zs&&(i.pr.$zs=1),this._batchTrack(i),this.cookie.register({info:n},"")}},y.prototype.debug=function(e){this.config.debug=e},y.prototype.identify=function(e,t,n){e+="";var i=r.isObject(t)?t:{},o=r.isObject(t)?n:t;this.cookie.register({cuid:e},""),this._session();var a=r.hasMobileSdk();if(this.config.autoUploadByApp&&a.flag)a.identify(e,i),r.isFunction(o)&&o();else{var s={dt:"usr",pr:{}},c=new Date;s.pr.$ct=c.getTime(),s.pr.$tz=6e4*-c.getTimezoneOffset(),s.pr.$cuid=e,s.pr.$sid=this.cookie.props.sid,s.pr.$url=r.replacezgSecretParams(location.href),s.pr.$ref=r.replacezgSecretParams(document.referrer),s.pr=r.extend(s.pr,r.encode(i)),this._batchTrack(s,o)}},y.prototype.identifyCross=function(e,t){var n=new Date,r={dt:"musr",pr:{$cuid:t||this.cookie.props.cuid,$cfuid:e,$tz:6e4*-n.getTimezoneOffset(),$ct:n.getTime()}};this._batchTrack(r)},y.prototype.setUserProperties=function(e,t){this.identify(this.cookie.props.cuid,e,t)},y.prototype.page=function(e,t){this._session();var n=r.replacezgSecretParams(location.href),i={et:"pg"};i.pid=n,i.pn=void 0===e?n:e,i.tl=document.title,i.ref=r.replacezgSecretParams(document.referrer),i.sid=this.cookie.props.sid,this._batchTrack(i,t)},y.prototype.setWxProperties=function(e,t,n){if(e&&t){var i=new Date,o={dt:"um",pr:{$push_ch:"zgwx",$wx_appid:e,$wx_openid:t,$ct:i.getTime(),$tz:6e4*-i.getTimezoneOffset()}},a=this.cookie.props.cuid;a&&(o.pr.$cuid=a),this._batchTrack(o,n)}else r.isFunction(n)&&n()},y.prototype.setUTM=function(e){e=r.info.campaignParams(e),this.cookie.register({utm:r.JSONEncode(e)},"")},y.prototype.track=function(e,t,n){var i=r.isObject(t)?t:{},o=r.isObject(t)?n:t,a=r.hasMobileSdk();this.config.autoUploadByApp&&a.flag?(r.extend(i,r.JSONDecode(this.cookie.props.superProperty)),a.track(e,i),r.isFunction(o)&&o()):this.batchTrack([{dt:"evt",eid:e,param:i}],o)},y.prototype.batchTrack=function(e,t){var n=r.hasMobileSdk();if(this.config.autoUploadByApp&&n.flag)for(var i=0,o=e.length;i<o;i++){var a=e[i];if(r.extend(a.param,r.JSONDecode(this.cookie.props.superProperty)),"abp"===a.dt)switch(a.eid){case"dr":n.dr(a.eid,a.param);break;default:n.autoTrack(a.eid,a.param)}r.isFunction(t)&&t()}else{this._session();var s=[],c=new Date,u=this.cookie.props.utm?r.JSONDecode(this.cookie.props.utm):{};this.config.updateUtm&&this.pageUtm&&!r.isEqual(this.pageUtm,{})&&(u=this.pageUtm,this.cookie.register({utm:r.JSONEncode(u)},""));for(i=0,o=e.length;i<o;i++){if((a=e[i])&&a.dt){var l={dt:a.dt,pr:{}};for(var d in l.pr.$ct=c.getTime(),l.pr.$tz=6e4*-c.getTimezoneOffset(),l.pr.$cuid=this.cookie.props.cuid,l.pr.$sid=this.cookie.props.sid,l.pr.$url=r.replacezgSecretParams("dr"===a.eid?a.param.$url:location.href),l.pr.$ref=window.$$zgPrePageHref||r.replacezgSecretParams(document.referrer),l.pr.$referrer_domain=this.cookie.props.referrerDomain,l.pr.$eid=a.eid,l.pr.$cn=this.config.app_channel,u)l.pr[d]=u[d];"evt"===a.dt?l.pr=r.extend(l.pr,r.encode(a.param)):l.pr=r.extend(l.pr,a.param),l.pr=r.extend(l.pr,r.encode(r.JSONDecode(this.cookie.props.superProperty))),s.push(l)}}s.length&&this._batchTrack(s,t)}},y.prototype._moved=function(e){this.last_activity=new Date,this.idle=0},y.prototype._startPing=function(){var e=this;r.register_event(window,"mousemove",(function(){e._moved.apply(e,arguments)})),void 0===this.pingInterval&&(this.pingInterval=window.setInterval((function(){e._ping()}),this.config.ping_interval))},y.prototype._stopPing=function(){void 0!==this.pingInterval&&(window.clearInterval(this.pingInterval),delete this.pingInterval)},y.prototype._ping=function(){if(this.config.ping&&this.idle<this.config.idle_timeout){var e={type:"ping",sdk:"web",sdkv:"2.0"};e.ak=this._key,e.did=this.did.props.did,e.cuid=this.cookie.props.cuid,this._sendTrackRequest(e)}else this._stopPing();var t=new Date;return t-this.last_activity>this.config.idle_threshold&&(this.idle=t-this.last_activity),this},y.prototype.getDid=function(){return this.did.props.did},y.prototype.getSid=function(){return this.cookie.props.sid},y.prototype.setSuperProperty=function(e){r.isObject(e)&&this.cookie.register({superProperty:r.JSONEncode(e)})},y.prototype.setSuperPropertyFromURL=function(e){if(r.isArray(e)){var t=r.JSONDecode(this.cookie.props.superProperty||"{}");r.each(e,(function(e){var n=r.getQueryParam(document.URL,e);n.length&&(t[e]=n)})),this.cookie.register({superProperty:r.JSONEncode(t)})}},y.prototype.setPlatform=function(e){r.isObject(e)&&(this.cookie.register({platform:r.JSONEncode(e),info:0}),this._info())},y.prototype._batchTrack=function(e,t){if(!this.config.autoUploadByApp||!r.hasMobileSdk().flag)if(r.isString(this._key)&&(this.config.skipAppkeyCheck||this._key.length>=32)){var n={},i=new Date;n.sln="itn",n.pl="js",n.sdk="zg-js",n.sdkv="2.0",n.owner="zg",n.ut=[i.getFullYear(),i.getMonth()+1,i.getDate()].join("-")+" "+i.toTimeString().match(/\d{2}:\d{2}:\d{2}/)[0],n.tz=6e4*-i.getTimezoneOffset(),n.debug=this.config.debug?1:0,n.ak=this._key,n.usr={did:this.did.props.did};var o=[];r.isArray(e)?o=e:o.push(e),n.data=o,this._sendTrackRequest(n,this._prepareCallback(t,n))}else console.warn("无效的AppKey: ",this._key)},y.prototype._prepareCallback=function(e,t){if(!r.isFunction(e))return null;return function(n){e(n,t)}},y.prototype._initDid=function(e){var t=r.cookie.get("_zg"),n="",i=r.hasMobileSdk();i.flag&&(n=i.getDid()),e=e||this.config.did||n||r.UUID(),t&&r.JSONDecode(t).uuid&&(e=r.JSONDecode(t).uuid),r.cookie.get("zg_did")||r.cookie.remove("zg_"+this._key);var o=r.extend({},this.config);o.cookie_expire_days=this.config.did_cookie_expire_days,this.did=new u("zg_did",o),this.did.register_once({did:e},"")},y.prototype._sendTrackRequest=function(e,t){var n=r.truncate(e,255),i={event:r.JSONEncode(n),encrypt:this.config.encrypt,_:(new Date).getTime().toString()},o={bac:this.config.api_host_bac+"&"+r.HTTPBuildQuery(i),normal:this.config.api_host+"&"+r.HTTPBuildQuery(i)};e.data.length&&"zgsee-web"===e.data[0].dt?t(e):this._sendRequest(o,i,t)},y.prototype._sendRequest=function(e,t,n){var r=new Image,i=!1,o=setTimeout((function(){!i&&n&&(n(),i=!0)}),500),a=function(){!i&&n&&(clearTimeout(o),n())};r.onload=a,r.onerror=function(){var t=new Image;t.onload=a,t.onerror=a,t.src=e.bac},r.src=e.normal},y.prototype.push=function(e){var t=e.shift();this[t]&&this[t].apply(this,e)},y.prototype.getKey=function(){return this._key},y.prototype._trackPV=function(e){if(!this._trackedPv||e){var t={$page_url:r.replacezgSecretParams(location.href),$page_title:window.document.title};this.is_landing&&(t.$landing_page=!0);var n=this._getQueryParam();if(n.zg_share_id&&n.zg_uid){t.$title=t.$page_title,t.$share_level=n.zg_share_level;var i={};for(var o in n)f.includes(o.replace("zg_",""))||0!==o.indexOf("zg_")||(i[o.replace("zg_","")]=n[o]);t=r.extend(t,r.encode(i))}this.batchTrack([{dt:"abp",eid:"pv",param:t}]),this._trackedPv=!0}},y.prototype.pv=function(){this._trackPV(!0)},y.prototype._openShare=function(){var e=this._queryParam;if(e.zg_share_id&&e.zg_uid){var t={$uid:e.zg_uid,$share_id:e.zg_share_id,$title:window.document.title||"",$path:location.pathname||"",$share_level:e.zg_share_level},n={};for(var i in e)f.includes(i.replace("zg_",""))||0!==i.indexOf("zg_")||(n[i.replace("zg_","")]=e[i]);var o=r.JSONDecode(this.config.shareToUtm);if(r.isObject(o)&&!r.isEqual(o,{})){var a={};for(var s in o)n[s]&&(a[o[s]]=n[s]);r.isEqual(a,{})||(a.utm_campaign||(a.utm_campaign="分享打开"),this.setUTM(a))}this.batchTrack([{dt:"abp",eid:"wxsopen",param:r.extend(t,r.encode(n))}])}},y.prototype.trackShare=function(e,t,n,i){if(r.isFunction(t)){var o=this.getDid(),a=this.cookie.props.cuid,s=(new Date).getTime(),c=a||o,u=null;if(sessionStorage){var l=sessionStorage.getItem("shareData");l&&(u=r.JSONDecode(l))}var d=1;!i&&u&&u.path===location.pathname&&parseInt(u.param.zg_share_level)&&(s=parseInt(u.param.zg_share_id),d=parseInt(u.param.zg_share_level)+1);var p=r.extend({uid:c,share_id:s,share_level:d,shareType:n?"朋友圈":"朋友"},e),h={};for(var f in p)h["zg_"+f]=p[f];var g=this;t(r.HTTPBuildQuery(h),(function(){g.batchTrack([{dt:"abp",eid:"wxshare",param:r.extend({$uid:c,$share_id:s,$share_title:e.title,$title:window.document.title||"",$path:location.pathname||"",$share_level:d,_shareType:h.zg_shareType},r.encode(e))}])}))}else m.error("分享","param error")},y.prototype.trackRevenue=function(e){var t=r.extend({price:0,total:0,productID:null,productQuantity:0,revenueType:null},e);t.total=function(e,t){var n=0;try{n+=e.toString().split(".")[1].length}catch(e){}try{n+=t.toString().split(".")[1].length}catch(e){}return Number(e.toString().replace(".",""))*Number(t.toString().replace(".",""))/Math.pow(10,n)}(t.price,t.productQuantity);var n=["productID","revenueType"],i=["price","total","productQuantity"],o={};for(var a in t)if(-1!==n.indexOf(a)||-1!==i.indexOf(a)){var s=t[a];i.indexOf(a)>-1&&(s=Number(s))!=s&&(s=0),o["$"+a]=s}this.batchTrack([{dt:"abp",eid:"revenue",param:o}])},y.prototype.startTrack=function(e){var t=_();t[e]=(new Date).getTime(),localStorage.setItem("zdru",r.JSONEncode(t))},y.prototype.endTrack=function(e,t){var n=_();if(n[e]){var i=t||{};i.$dru=(new Date).getTime()-n[e],i.duration||(i._$duration$_=(new Date).getTime()-n[e]),delete n[e],localStorage.setItem("zdru",r.JSONEncode(n)),this.track(e,i)}},e.exports=y},function(e,t,n){var r=n(0),i=n(1),o=n(9),a=n(11),s=n(5),c=n(4);function u(e,t){this.tracker=e,this.config=r.extend({open:!1,isClickAble:null},t),this.loaded=!1,window.$$zgPrePageHref=null,this.config.open&&this._init()}u.prototype={constructor:u,_init:function(){this._onView();var e=this;i.ready((function(){setTimeout((function(){e._checkPermissions()}),1e3)}),this)},_checkPermissions:function(){"analysis"===window.sessionStorage.getItem("zhugeAnalysisModeType")&&s(a.url.CHECK_LOGIN,{type:a.json?"get":"post",context:this,useSocket:!0,success:function(e){e.authorized&&this._loadAnalysisCode()},error:function(e){console&&console.error("加载分析脚本失败",e)}})},_loadAnalysisCode:function(){this.loaded||(this.loaded=!0,window.sessionStorage.setItem("zhugeAnalysisModeType","analysis"),i.loadJs({src:"https://sdk.zhugeio.com/analysis.min.js?a="+(new Date).toDateString()}))},_onView:function(e){var t=this.tracker;setTimeout((function(){r.replacezgSecretParams(location.href)!==window.$$zgPrePageHref&&(t._trackPV(e),window.$$zgPrePageHref=r.replacezgSecretParams(location.href))}),300)},getEvent:function(e){c.log("可视化","开始获取全埋点点击事件详情",e);var t=i.getUniqueSelector(e.target);if(t){c.log("可视化","点击元素选择器: ",t);var n=e.target,a={$page_url:r.replacezgSecretParams(location.href),$page_title:window.document.title,$element_id:i.getAttr(n,"id"),$element_content:i.getTextContent(n),$element_type:i.getTagName(n),$element_style:i.getAttr(n,"class"),$element_selector:o(t)};return this.config.isLanding&&(a.$landing_page=!0),c.log("可视化","全埋点点击事件详情",a),{dt:"abp",eid:"click",param:a}}c.log("可视化","未能成功获取元素的选择器")}},e.exports=u},function(e,t,n){var r=n(0),i=n(1),o=n(5),a=n(3),s=n(4);function c(e,t){this.config=r.extend({open:!1,stopTrack:null},t||{}),this.tracker=e,this.eventList=[],this.loaded=!1,this.config.open&&this._init()}c.prototype={constructor:c,_init:function(){i.ready((function(){this._initEventBind(),this._loadEventList(),window.sessionStorage.getItem(a.SESSION_KEYS.IS_ANALYSIS_MODE)&&this._loadAnalysisCode()}),this)},_initEventBind:function(){},_loadEventList:function(){o("https://api.zhugeio.com/v2/visual",{type:"get",data:{url:r.replacezgSecretParams(location.href),app_key:this.tracker.getKey(),platform:3},context:this,jsonp:!0,success:function(e){10001===e.code&&(this.eventList=e.visual_events)}})},_loadAnalysisCode:function(){this.loaded||(s.log("分析视图","打开可视化埋点分析视图"),this.loaded=!0,this.config.stopTrack(),window.sessionStorage.setItem(a.SESSION_KEYS.IS_ANALYSIS_MODE,r.JSONEncode({flag:!0})),i.loadJs({src:"https://sdk.zhugeio.com/visualizer.min.js?a="+(new Date).toDateString()}))},getEvent:function(e){s.log("可视化","开始获取可视化事件",e);for(var t=[],n=0,r=this.eventList.length;n<r;n++)for(var o=this.eventList[n],a=0;o.element&&a<o.element.length;a++)if(i.is(e.target,o.element[a]).flag){for(var c={element_content:i.getTextContent(e.target)},u=0;u<o.attr.length;u++){var l=o.attr[u];c[l.name]=i.getTextContent(i.query(l.selector)[0])}var d={dt:"evt",eid:o.event_name,param:c};t.push(d)}return t.length?s.log("可视化","可视化埋点事件匹配成功",t):s.log("可视化","可视化埋点事件匹配失败，点击元素的选择器为",i.getUniqueSelector(e.target)),t}},e.exports=c},function(e,t,n){var r=n(0),i=n(2);n(10);function o(e,t){this.config=r.extend({open:!1},t||{}),this.tracker=e,this.loaded=!1,this.config.open&&this._init()}o.prototype={constructor:o,_init:function(){i.ready((function(){this._initEventBind()}),this)},_initEventBind:function(){},_loadAnalysisCode:function(){this.loaded||(this.loaded=!0,window.sessionStorage.setItem("zhugeAnalysisModeType","heatMap"),i.loadJs({src:"https://sdk.zhugeio.com/heatMap.min.js?a="+(new Date).toDateString()}))}},e.exports=o},function(e,t,n){var r=n(0),i=function(e,t){this.name=e,this.props={},this.config=r.extend({},t),this.load()};i.prototype.load=function(){var e=r.cookie.parse(this.name);if("storage"===this.config.storeMode){var t=localStorage.getItem(this.name);!t&&e?(r.cookie.set(this.name,"",-1e3,this.config.cookie_cross_subdomain,this.config.cookie_secure),localStorage.setItem(this.name,r.JSONEncode(e))):e=r.JSONDecode(t||"{}")}e&&(this.props=r.extend({},e))},i.prototype.save=function(){"cookie"===this.config.storeMode?r.cookie.set(this.name,r.JSONEncode(this.props),this.config.cookie_expire_days,this.config.cookie_cross_subdomain,this.config.cookie_secure):localStorage.setItem(this.name,r.JSONEncode(this.props))},i.prototype.register_once=function(e,t){return!!r.isObject(e)&&(void 0===t&&(t="None"),r.each(e,(function(e,n){this.props[n]&&this.props[n]!==t||(this.props[n]=e)}),this),this.save(),!0)},i.prototype.register=function(e){return!!r.isObject(e)&&(r.extend(this.props,e),this.save(),!0)},e.exports=i},function(e,t,n){var r=n(0),i=n(1);function o(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(e){var t=e.parentNode;return t&&t.assignedSlot&&(t=t.assignedSlot.parentNode),t&&11==t.nodeType&&t.host?t.host:t}function s(e){this.tracker=e,this.elementList=[],this.queuedEntries=[],this.observerInstance=null,this.init(),this.initWatch()}s.prototype.initWatch=function(){var e=i.supportTest();if(e){var t=this;new e((function(e){for(var n=0;n<e.length;n++)for(var r=e[n].addedNodes,o=0;o<r.length;o++){var a=r[o];try{var s=a.querySelectorAll(".zhuge-expo-track");for(g=0;g<s.length;g++)t.observerInstance.observe(s[g]),t.elementList.push(s[g]);i.is(a,".zhuge-expo-track")&&(t.observerInstance.observe(a),t.elementList.push(a))}catch(e){console.warn("查找曝光元素异常",a,e)}}})).observe(document,{attributes:!1,childList:!0,subtree:!0,characterData:!1,characterDataOldValue:!1})}else console.warn("浏览器不支持MutationObserver，无法有效监听元素变化")},s.prototype.init=function(){this.observerInstance&&this.observerInstance.disconnect(),this.elementList=Array.prototype.slice.call(document.querySelectorAll(".zhuge-expo-track")),this.queuedEntries=[],this.startObserveMarkElement()},s.prototype.computeRectIntersection=function(e,t){var n=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),i=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-i,s=r-n;return a>=0&&s>=0&&{top:n,bottom:r,left:i,right:o,width:a,height:s}||null},s.prototype.computeTargetAndRootIntersection=function(e,t,n){if("none"==window.getComputedStyle(e).display)return null;for(var r,i,s,c,u=t,l=a(e),d=!1;!d&&l;){var p=null,h=1==l.nodeType?window.getComputedStyle(l):{};if("none"==h.display)return null;if(9==l.nodeType)if(d=!0,l==document)p=n;else{var f=a(l),g=f&&o(f),v=f&&this.computeTargetAndRootIntersection(f,g,n);g&&v?(l=f,r=g,s=void 0,c=void 0,s=(i=v).top-r.top,c=i.left-r.left,p={top:s,left:c,height:i.height,width:i.width,bottom:s+i.height,right:c+i.width}):(l=null,u=null)}else{var m=l.ownerDocument;l!=m.body&&l!=m.documentElement&&"visible"!=h.overflow&&(p=o(l))}if(p&&(u=this.computeRectIntersection(p,u)),!u)break;l=l&&a(l)}return u},s.prototype.startObserveMarkElement=function(){var e=this;window.IntersectionObserver?(this.observerInstance=new window.IntersectionObserver((function(t){r.each(t,(function(t){if(t.isIntersecting){var n=e.getEventDataFromDataset(t.target.dataset);e.tracker.track(n[0],n[1])}}))})),r.each(this.elementList,(function(t){e.observerInstance.observe(t)}))):(this.checkElementInView(),i.bind(window,"scroll",r.throttle(this.checkElementInView,100,this)))},s.prototype.checkElementInView=function(e){var t=this;if(this.elementList.forEach((function(e){var n,r,i,a=e,s=o(a),c=(n=document,r=n.documentElement,i=n.body,rootRect={top:0,left:0,right:r.clientWidth||i.clientWidth,width:r.clientWidth||i.clientWidth,bottom:r.clientHeight||i.clientHeight,height:r.clientHeight||i.clientHeight},rootRect);!!t.computeTargetAndRootIntersection(a,s,c)?(!0!==a.entry&&t.queuedEntries.push(a),a.entry=!0):a.entry=!1})),this.queuedEntries.length){var n=this.queuedEntries.slice();this.queuedEntries=[],r.each(n,(function(e){var t=this.getEventDataFromDataset(e.dataset);this.tracker.track(t[0],t[1])}),this)}},s.prototype.getEventDataFromDataset=function(e){var t="",n={};return r.each(e,(function(e,r){if(/^expo/.test(r))if("expoName"===r)t=e;else{var i=r.replace(/^expo(.*)/,(function(e,t,n,r){return t.replace(t[0],t[0].toLocaleLowerCase())}));n[i]=e}})),[t,n]},e.exports=s},,,,,,,,,,function(e,t,n){var r=n(14),i=n(1);DEFAULT_CONFIG={api_host:"https://u.zhugeapi.net/web_event/web.gif?method=web_event_srv.upload",api_host_bac:"https://ubak.zhugeio.com/web_event/web.gif?method=web_event_srv.upload",debug:!1,inherit_user_data:!0,ping:!1,ping_interval:12e3,idle_timeout:3e5,idle_threshold:1e4,track_link_timeout:300,cookie_expire_days:365,did_cookie_expire_days:365,cookie_cross_subdomain:!0,cookie_secure:!1,info_upload_interval_days:7,session_interval_mins:30,app_channel:"js",app_version:"1.0",superProperty:"{}",platform:"{}",autoTrack:!1,openLanding:!0,isClickAble:null,redirectAfterTrack:!1,visualizer:!1,deepShare:!1,onLoadDeepShare:null,utm:{},adTrack:!1,zgsee:!1,autoUploadByApp:!0,did:"",wechart:!1,updateUtm:!1,shareToUtm:{},storeMode:"cookie",privacySplitRule:{privacy:!1,maxLength:10,beginLength:3,endLength:3,replaceStr:"..."},alwaysLanding:!1,exposure:!1,duration:!1,pubKey:"MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEA5FhCfmlBx2dlDoAs9U9WgnFd4BXbPJoT52ptYB1t6zcxpv3bYzRrUvEqy0utrrUqkJPCGR5rFG+K4ph2ywoz9VpdjAyEFeAmik7nGgd0AxhJK9Vjl2GsEsJ7FBoHkDLbXdiDOnJflvPXlqfOwte+Tr4tZAUVm2PYGbVlgwQdUlM/dLPmPpRp5wVauv+waLBPcIVBMgNPl9xUqU4KLCtMj/OzHetdJEWMM3bk3s1TpgE8fR+T+63RvQ4ydveC/do2NIFqK2NoO7dIE5YFUwh0ImVV7nDZkgGYu/+i9/6zN4H4GqUKfSRMEhj7EsR3iMVkLVhC1LXfTxeHgHWRL8mVhi7s/SF2E+UDghBleW1/iQbCj3VVypjGBTIdp1kTfNrEJSEtsirnzqMDZRKVsocd4RMb/rLsYmI8VlUNZJSI0Vqr6ywH1mFM92lqzH1y2H4RGVkpbUqmfUiH3aCzRsN271im26vV16XU7LDSPqMr4l4P9sOszo6YwyC/6cXZduzlAgMBAAE=",cryptoType:1,encrypt:0,skipAppkeyCheck:!1};for(var o=window.zanalytics||window.zhuge||[],a=new r(DEFAULT_CONFIG),s=0;s<o.length;s++)if("_init"===o[s][0]){var c=o.shift(),u=c.shift();c.push((function(){for(;o&&o.length>0;){var e=o.shift(),t=e.shift();a[t]&&a[t].apply(a,e)}})),a[u]&&a[u].apply(a,c);break}if(a.config.deepShare){var l=new Date,d=l.getFullYear().toString()+l.getMonth().toString()+l.getDate().toString();i.loadJs({src:"https://sdk.zhugeio.com/deepshare.min.js?v="+d,onLoad:a.config.onLoadDeepShare})}a.env=Object({API_SERVER_ORIGIN:"https://api.zhugeio.com",LOG_API_ORIGIN:"https://u.zhugeapi.net",LOG_API_ORIGIN_BAC:"https://ubak.zhugeio.com",SDK_DOWNLOAD_SRC:"https://sdk.zhugeio.com",SOCKET_URL:"wss://static2-online.zhugeio.com",SOCKET_PREFIX:"/ns",ZGSEE_SOCKET:"wss://zgsee-gw.zhugeio.com/",ZGSEE_APPKEY:"https://ubak.zhugeio.com",SHOW_LOG:!1,PUBKEY:"MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEA5FhCfmlBx2dlDoAs9U9WgnFd4BXbPJoT52ptYB1t6zcxpv3bYzRrUvEqy0utrrUqkJPCGR5rFG+K4ph2ywoz9VpdjAyEFeAmik7nGgd0AxhJK9Vjl2GsEsJ7FBoHkDLbXdiDOnJflvPXlqfOwte+Tr4tZAUVm2PYGbVlgwQdUlM/dLPmPpRp5wVauv+waLBPcIVBMgNPl9xUqU4KLCtMj/OzHetdJEWMM3bk3s1TpgE8fR+T+63RvQ4ydveC/do2NIFqK2NoO7dIE5YFUwh0ImVV7nDZkgGYu/+i9/6zN4H4GqUKfSRMEhj7EsR3iMVkLVhC1LXfTxeHgHWRL8mVhi7s/SF2E+UDghBleW1/iQbCj3VVypjGBTIdp1kTfNrEJSEtsirnzqMDZRKVsocd4RMb/rLsYmI8VlUNZJSI0Vqr6ywH1mFM92lqzH1y2H4RGVkpbUqmfUiH3aCzRsN271im26vV16XU7LDSPqMr4l4P9sOszo6YwyC/6cXZduzlAgMBAAE="}),window.zanalytics=a,window.zhuge=a}]);
